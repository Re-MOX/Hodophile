<!-- navigationbar -->
<%- include('../includes/navigation.ejs') %>

    <!-- header -->
    <%- include('../includes/agHead.ejs') %>

        <!-- section --->
        <section class="agToursSec1">
            <div class="container">
                <div class="row">
                    <div class="col-2 ">
                        <div class=" mb-3 agToursSec1LeftButton">
                            <a href="/agency/shoppings" class="d-flex justify-content-center">
                                <i class="text-primary agToursSec1LeftButtonIcon fa-solid fa-user"></i>
                                <p style="color: white;" class="agToursSec1LeftButtonText text-center mt-3">View
                                </p>
                            </a>
                        </div>
                        <div class=" mb-3 agToursSec1LeftButton">
                            <a href="/agency/shoppings/add" class="d-flex justify-content-center">
                                <i class="text-success agToursSec1LeftButtonIcon fa-solid fa-user"></i>
                                <p style="color: white;" class="agToursSec1LeftButtonText text-center mt-3">Add</p>
                            </a>
                        </div>
                        <div class=" mb-3 agToursSec1LeftButton">
                            <a href="/agency/shoppings/delete" class="d-flex justify-content-center">
                                <i class="text-danger agToursSec1LeftButtonIcon fa-solid fa-user"></i>
                                <p style="color: white;" class="agToursSec1LeftButtonText text-center mt-3">Delete
                                </p>
                            </a>
                        </div>
                        <div class=" mb-3 agToursSec1LeftButton">
                            <a href="/agency/shoppings/update" class="d-flex justify-content-center">
                                <i class="agToursSec1LeftButtonIcon fa-solid fa-user"></i>
                                <p style="color: white;" class="agToursSec1LeftButtonText text-center mt-3">Update
                                </p>
                            </a>
                        </div>
                        <div class=" mb-3 agToursSec1LeftButton">
                            <a href="/agency/shoppings/category" class="d-flex justify-content-center">
                                <i class="text-dark agToursSec1LeftButtonIcon fa-solid fa-user"></i>
                                <p style="color: white;" class="agToursSec1LeftButtonText text-center mt-3">Category
                                </p>
                            </a>
                        </div>
                    </div>

                    <!-- section-2 -->
                    <div class="agToursSec1RightBar ms-4 col-9">
                        <h1 class="agToursSec1RightHead text-center mt-3 pb-3">View Category</h1>

                        <!-- search button -->
                        <input class="agToursSec1SearchButton" type="text" id="myInput" onkeyup="myFunction()"
                            placeholder="Search for names.." title="Type in a name">
                        <div class="d-flex justify-content-end mt-3 pb-4">
                            <a href="/agency/shoppings/category/add" class="ps-5 pe-5 btn btn-success">Add Category</a>
                        </div>
                        <% if (categoryErr.length>0){%>
                            <div id="ErrorBarClose" class="d-flex justify-content-center">
                                <div class="w-50 d-flex justify-content-center">
                                    <p id="ErrText" class="text-center signupSec2ErrorText">
                                        <%= categoryErr %>
                                    </p>
                                    <i onclick="closeErrBar()"
                                        class=" signupSec2ErrorMark fa-regular fa-circle-xmark"></i>
                                </div>
                            </div>
                            <%}%>
                                <div class="d-flex justify-content-center">
                                    <div class="table-responsive col-7 col-md-6 col-lg-5">
                                        <table id="myTable" class="table table-striped "
                                            style="background-color: #ecf9ee;">
                                            <thead>
                                                <tr>
                                                    <th scope="col"></th>
                                                    <th scope="col">Name</th>
                                                    <th scope="col"></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <% for(let i=0; i < categories.length ; i++){%>
                                                    <tr scope="row">
                                                        <td class="pt-3">
                                                            <%= i+1 %>
                                                        </td>
                                                        <td class="pt-3">
                                                            <%= categories[i].Name %>
                                                        </td>
                                                        <td><a onclick="agencyDeleteCategory('<%= categories[i]._id %>')"
                                                                class="btn btn-danger">Delete</a></td>
                                                    </tr>
                                                    <%}%>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Search Field -->
        <script src="/js/agencySearchField.js"></script>

        <!-- Swal Alert -->
        <script src="/js/swalAlert.js"></script>


        <script>
            const ErrorBarClose = document.getElementById('ErrorBarClose')
            function closeErrBar() {
                ErrorBarClose.style.visibility = 'hidden'
            }
        </script>

        <!-- footer -->
        <%- include('../includes/agEnd.ejs') %>